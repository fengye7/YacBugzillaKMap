{"ast":null,"code":"import { createElementVNode as _createElementVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, openBlock as _openBlock, createBlock as _createBlock } from \"vue\";\nconst _hoisted_1 = {\n  ref: \"chartRef\",\n  style: {\n    width: '1000%',\n    height: '600%'\n  }\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_el_card = _resolveComponent(\"el-card\");\n  return _openBlock(), _createBlock(_component_el_card, null, {\n    default: _withCtx(() => [_createElementVNode(\"div\", _hoisted_1, null, 512 /* NEED_PATCH */)]),\n    _: 1 /* STABLE */\n  });\n}","map":{"version":3,"names":["ref","style","width","height","_createBlock","_component_el_card","default","_withCtx","_createElementVNode","_hoisted_1","_"],"sources":["D:\\code\\bugzilla\\527\\front-end\\src\\components\\PieChart.vue"],"sourcesContent":["<template>\r\n    <el-card>\r\n        <div ref=\"chartRef\" :style=\"{ width: '1000%', height: '600%' }\"></div>\r\n    </el-card>\r\n</template>\r\n\r\n<script setup>\r\nimport * as echarts from \"echarts\";\r\n// import { defineProps, ref, onMounted, watch } from \"vue\";\r\nimport { ref, onMounted } from \"vue\";\r\nimport axios from 'axios';\r\n\r\n//axios\r\nconst data = ref([{\r\n    \"windriver.com\": 1033,\r\n    \"mvista.com\": 211,\r\n    \"bigsur.com\": 208,\r\n    \"intel.com\": 2403,\r\n    \"linuxfoundat...\": 798,\r\n    \"yoctoproject.org\": 1035,\r\n    \"arm.com\": 665,\r\n    \"linux.intel.com\": 57,\r\n    \"circuitco.com\": 3,\r\n    \"gmail.com\": 1234,\r\n    \"bluelightning...\": 344,\r\n    \"gherzan.com\": 3,\r\n    \"ossystems.com.br\": 38,\r\n    \"enea.com\": 8,\r\n    \"linuxfoundation.org\": 299,\r\n    \"ni.com\": 162,\r\n    \"inte...\": 22,\r\n    \"freescale.com\": 16,\r\n    \"eaglescrag.net\": 13,\r\n    \"linux.i...\": 23,\r\n    \"intel...\": 162,\r\n    \"timomueller.eu\": 1,\r\n    \"pabigot.com\": 1,\r\n    \"denix.org\": 9,\r\n    \"verizon.com\": 1,\r\n    \"holtmann.org\": 4,\r\n    \"pbarker.dev\": 4,\r\n    \"kernel.org\": 4,\r\n    \"hitach...\": 1,\r\n    \"enea.se\": 1,\r\n    \"mail.de\": 1,\r\n    \"linaro.org\": 5,\r\n    \"rambler.ru\": 1,\r\n    \"seebs.net\": 17,\r\n    \"audiogeek.co.uk\": 1,\r\n    \"anpa.de\": 1,\r\n    \"technux.se\": 2,\r\n    \"minimum.se\": 2,\r\n    \"live.com\": 2,\r\n    \"innoide.com\": 1,\r\n    \"peter-eng.com.au\": 1,\r\n    \"pld-linux.org\": 1,\r\n    \"easyarm.com\": 1,\r\n    \"goto.fi\": 97,\r\n    \"nsn.com\": 1,\r\n    \"embed.me.uk\": 1,\r\n    \"juno.com\": 1,\r\n    \"...\": 129,\r\n    \"iki.fi\": 3,\r\n    \"i...\": 22,\r\n    \"timesys.com\": 2,\r\n    \"octagonsystems.com\": 1,\r\n    \"openedhand.com\": 1,\r\n    \"coxtr.com\": 1,\r\n    \"int...\": 6,\r\n    \"balister.org\": 2,\r\n    \"linux.intel...\": 56,\r\n    \"kde.org\": 1,\r\n    \"fake.user\": 68,\r\n    \"konsulko.com\": 112,\r\n    \"wanadoo.fr\": 1,\r\n    \"gmx.de\": 46,\r\n    \"tpip.net\": 1,\r\n    \"nwlink.com\": 1,\r\n    \"cetola.net\": 68,\r\n    \"nxp.com\": 2,\r\n    \"gmx.net\": 1,\r\n    \"vector.com\": 1,\r\n    \"mailbox.org\": 1,\r\n    \"codethink...\": 1,\r\n    \"andred.net\": 3,\r\n    \"mlbassoc.com\": 1,\r\n    \"imgtec.com\": 1,\r\n    \"denx.de\": 1,\r\n    \"ikusi.com\": 1,\r\n    \"mender.io\": 1,\r\n    \"seeingmachin...\": 1,\r\n    \"mentor.com\": 3,\r\n    \"pidge.org\": 16,\r\n    \"converseincode.com\": 2,\r\n    \"nathanrossi.com\": 3,\r\n    \"qq.com\": 2,\r\n    \"in...\": 5,\r\n    \"huawei.com\": 2,\r\n    \"happypunch.com\": 3,\r\n    \"dev.rtsoft.ru\": 1,\r\n    \"buzzcollectivemarket...\": 20,\r\n    \"axis.com\": 4,\r\n    \"deserted.net\": 2,\r\n    \"op.pl\": 1,\r\n    \"menlosystems.com\": 1,\r\n    \"madison.systems\": 4,\r\n    \"reliableembeddeds...\": 10,\r\n    \"gmx.li\": 1,\r\n    \"asterius.io\": 3,\r\n    \"relysys.co.in\": 1,\r\n    \"baslerweb.com\": 1,\r\n    \"bmw.de\": 2,\r\n    \"nonadev.net\": 1,\r\n    \"xilinx.com\": 17,\r\n    \"hcl.com\": 8,\r\n    \"3mdeb.com\": 2,\r\n    \"microch...\": 1,\r\n    \"prsolucoes.com\": 1,\r\n    \"dynamicdevices.co.uk\": 1,\r\n    \"kdab.com\": 1,\r\n    \"rsi-elektrotechnik.de\": 1,\r\n    \"alibaba-inc.com\": 1,\r\n    \"titv.se\": 1,\r\n    \"gmai...\": 1,\r\n    \"googlema...\": 2,\r\n    \"siemens.com\": 2,\r\n    \"aerq.com\": 1,\r\n    \"kernel.crashing.org\": 5,\r\n    \"stusta.de\": 2,\r\n    \"free.fr\": 3,\r\n    \"polysync.io\": 1,\r\n    \"aox-tech.de\": 1,\r\n    \"vanmierlo.com\": 1,\r\n    \"ithinx.io\": 1,\r\n    \"cybertrust.c...\": 1,\r\n    \"enedino.org\": 9,\r\n    \"sakoman.com\": 28,\r\n    \"saye.org\": 1,\r\n    \"ronell.me\": 1,\r\n    \"126.com\": 1,\r\n    \"hotmail.com\": 2,\r\n    \"crashcourse.ca\": 2,\r\n    \"evolware.org\": 1,\r\n    \"bootlin.com\": 124,\r\n    \"uwaterloo.ca\": 9,\r\n    \"whitetree.xyz\": 1,\r\n    \"amazon.com\": 1,\r\n    \"scs.ch\": 1,\r\n    \"cybernetics.com\": 2,\r\n    \"taitradio.com\": 1,\r\n    \"gma...\": 1,\r\n    \"opensynergy.com\": 2,\r\n    \"web.de\": 1,\r\n    \"cookiesoft.de\": 1,\r\n    \"richelberger.com\": 3,\r\n    \"generac.com\": 1,\r\n    \"neumann-web.eu\": 1,\r\n    \"zhukoff.net\": 43,\r\n    \"qt.io\": 1,\r\n    \"microsoft.com\": 2,\r\n    \"shaiton.org\": 1,\r\n    \"amazon.de\": 7,\r\n    \"welotec.com\": 6,\r\n    \"majess.pl\": 1,\r\n    \"in.bosch.com\": 1,\r\n    \"nl.abb.com\": 1,\r\n    \"smile.fr\": 22,\r\n    \"kpit.com\": 1,\r\n    \"st.com\": 1,\r\n    \"renesas.com\": 1,\r\n    \"baylibre.com\": 43,\r\n    \"blueye.no\": 1,\r\n    \"yahoo.com\": 1,\r\n    \"myfastmail.com\": 1,\r\n    \"agilent.com\": 3,\r\n    \"dijkzeul.eu\": 1,\r\n    \"snap.com\": 1,\r\n    \"posteo.com\": 12,\r\n    \"canogaperkins.net\": 1,\r\n    \"eero.com\": 1,\r\n    \"jahn....\": 1,\r\n    \"tl-software.fi\": 1,\r\n    \"sm...\": 1,\r\n    \"loewe...\": 1,\r\n    \"outlook.com\": 1,\r\n    \"digi.com\": 1,\r\n    \"desy.de\": 1,\r\n    \"woodward.com\": 1,\r\n    \"163.com\": 1,\r\n    \"wyplay.com\": 1,\r\n    \"port4949.net\": 1\r\n}]);\r\n\r\nlet baseUrl = 'http://47.120.41.97:8002/bugs/'\r\n\r\nconst fetchData = async () => {\r\n    // try {\r\n    //     const response = await axios.get(baseUrl + 'companies');\r\n    //     data.value = response.data; // 假设后端返回的数据格式符合饼图需要的数据结构\r\n    //     if (chart) {\r\n    //         chart.setOption(getOption());\r\n    //     }\r\n    //     console.log(data)\r\n    //     console.log(data.value)\r\n    //     console.log(chart)\r\n    //     console.log(chart.value)\r\n\r\n    // } catch (error) {\r\n    //     console.error('Error fetching data:', error);\r\n    // }\r\n\r\n    await axios.get(baseUrl + 'companies')\r\n        .then(response => {\r\n            console.log('responsedata', response.data);\r\n            // 处理成功的情况\r\n            data.value = response.data; // 假设后端返回的数据格式符合饼图需要的数据结构\r\n            if (chart) {\r\n                chart.setOption(getOption());\r\n            }\r\n        })\r\n        .catch(error => {\r\n            // 处理错误情况\r\n            console.error('Error fetching data:', error);\r\n        });\r\n\r\n    if (chart) {\r\n        chart.setOption(getOption());\r\n    }\r\n};\r\n\r\n//initiate of pie chart\r\n// const props = defineProps({\r\n//     data: {\r\n//         type: Array,\r\n//         required: true\r\n//     },\r\n//     xAxisDataKey: {\r\n//         type: String,\r\n//         default: 'date'\r\n//     },\r\n//     yAxisDataKey: {\r\n//         type: String,\r\n//         default: 'value'\r\n//     }\r\n// });\r\n\r\nconst chartRef = ref(null);\r\n\r\nlet chart;\r\n\r\nonMounted(() => {\r\n    initChart();\r\n});\r\n\r\n// watch(\r\n//     // () => props.data,\r\n//     () => {\r\n//         if (chart) {\r\n//             chart.setOption(getOption());\r\n//         }\r\n//     },\r\n//     { deep: true }\r\n// );\r\n\r\nconst getOption = () => {\r\n    console.log('a', Object.entries(data.value).map(([name, value]) => ({ name, value }))[0])\r\n    return {\r\n        title: {\r\n            text: '企业数量统计',\r\n            subtext: '按提交人邮箱后缀统计',\r\n            // left: 'center'\r\n        },\r\n        tooltip: {\r\n            trigger: 'item',\r\n            formatter: '{a} <br/>{b} : {c} ({d}%)'\r\n        },\r\n        legend: {\r\n            type: 'scroll',\r\n            orient: 'vertical',\r\n            right: 10,\r\n            top: 20,\r\n            bottom: 20\r\n        },\r\n        series: [\r\n            {\r\n                name: '占比',\r\n                type: 'pie',\r\n                radius: '80%',\r\n                // data: Object.entries(data.value).map(item => ({\r\n                //     value: item.value,\r\n                //     name: item.name\r\n                // })),\r\n                data: Object.entries(data.value).map(([name, value]) => ({ name, value }))[0],\r\n                emphasis: {\r\n                    itemStyle: {\r\n                        shadowBlur: 10,\r\n                        shadowOffsetX: 0,\r\n                        shadowColor: 'rgba(0, 0, 0, 0.5)'\r\n                    }\r\n                }\r\n            }\r\n        ]\r\n    };\r\n};\r\n\r\nconst initChart = () => {\r\n    fetchData();\r\n    console.log('aaaaaa', chartRef.value)\r\n    chart = echarts.init(chartRef.value);\r\n    chart.setOption(getOption());\r\n};\r\n\r\n</script>"],"mappings":";;EAEaA,GAAG,EAAC,UAAU;EAAEC,KAAK,EAAE;IAAAC,KAAA;IAAAC,MAAA;EAAA;;;;uBADhCC,YAAA,CAEUC,kBAAA;IAHdC,OAAA,EAAAC,QAAA,CAEQ,MAAsE,CAAtEC,mBAAA,CAAsE,OAAtEC,UAAsE,8B;IAF9EC,CAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}