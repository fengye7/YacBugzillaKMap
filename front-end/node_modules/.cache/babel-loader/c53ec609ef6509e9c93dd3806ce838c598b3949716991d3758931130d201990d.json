{"ast":null,"code":"/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\n\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\n\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\nimport * as zrUtil from 'zrender/lib/core/util.js';\nimport { parseClassType } from './clazz.js';\n/**\r\n * Usage of query:\r\n * `chart.on('click', query, handler);`\r\n * The `query` can be:\r\n * + The component type query string, only `mainType` or `mainType.subType`,\r\n *   like: 'xAxis', 'series', 'xAxis.category' or 'series.line'.\r\n * + The component query object, like:\r\n *   `{seriesIndex: 2}`, `{seriesName: 'xx'}`, `{seriesId: 'some'}`,\r\n *   `{xAxisIndex: 2}`, `{xAxisName: 'xx'}`, `{xAxisId: 'some'}`.\r\n * + The data query object, like:\r\n *   `{dataIndex: 123}`, `{dataType: 'link'}`, `{name: 'some'}`.\r\n * + The other query object (cmponent customized query), like:\r\n *   `{element: 'some'}` (only available in custom series).\r\n *\r\n * Caveat: If a prop in the `query` object is `null/undefined`, it is the\r\n * same as there is no such prop in the `query` object.\r\n */\nvar ECEventProcessor = /** @class */function () {\n  function ECEventProcessor() {}\n  ECEventProcessor.prototype.normalizeQuery = function (query) {\n    var cptQuery = {};\n    var dataQuery = {};\n    var otherQuery = {};\n    // `query` is `mainType` or `mainType.subType` of component.\n    if (zrUtil.isString(query)) {\n      var condCptType = parseClassType(query);\n      // `.main` and `.sub` may be ''.\n      cptQuery.mainType = condCptType.main || null;\n      cptQuery.subType = condCptType.sub || null;\n    }\n    // `query` is an object, convert to {mainType, index, name, id}.\n    else {\n      // `xxxIndex`, `xxxName`, `xxxId`, `name`, `dataIndex`, `dataType` is reserved,\n      // can not be used in `compomentModel.filterForExposedEvent`.\n      var suffixes_1 = ['Index', 'Name', 'Id'];\n      var dataKeys_1 = {\n        name: 1,\n        dataIndex: 1,\n        dataType: 1\n      };\n      zrUtil.each(query, function (val, key) {\n        var reserved = false;\n        for (var i = 0; i < suffixes_1.length; i++) {\n          var propSuffix = suffixes_1[i];\n          var suffixPos = key.lastIndexOf(propSuffix);\n          if (suffixPos > 0 && suffixPos === key.length - propSuffix.length) {\n            var mainType = key.slice(0, suffixPos);\n            // Consider `dataIndex`.\n            if (mainType !== 'data') {\n              cptQuery.mainType = mainType;\n              cptQuery[propSuffix.toLowerCase()] = val;\n              reserved = true;\n            }\n          }\n        }\n        if (dataKeys_1.hasOwnProperty(key)) {\n          dataQuery[key] = val;\n          reserved = true;\n        }\n        if (!reserved) {\n          otherQuery[key] = val;\n        }\n      });\n    }\n    return {\n      cptQuery: cptQuery,\n      dataQuery: dataQuery,\n      otherQuery: otherQuery\n    };\n  };\n  ECEventProcessor.prototype.filter = function (eventType, query) {\n    // They should be assigned before each trigger call.\n    var eventInfo = this.eventInfo;\n    if (!eventInfo) {\n      return true;\n    }\n    var targetEl = eventInfo.targetEl;\n    var packedEvent = eventInfo.packedEvent;\n    var model = eventInfo.model;\n    var view = eventInfo.view;\n    // For event like 'globalout'.\n    if (!model || !view) {\n      return true;\n    }\n    var cptQuery = query.cptQuery;\n    var dataQuery = query.dataQuery;\n    return check(cptQuery, model, 'mainType') && check(cptQuery, model, 'subType') && check(cptQuery, model, 'index', 'componentIndex') && check(cptQuery, model, 'name') && check(cptQuery, model, 'id') && check(dataQuery, packedEvent, 'name') && check(dataQuery, packedEvent, 'dataIndex') && check(dataQuery, packedEvent, 'dataType') && (!view.filterForExposedEvent || view.filterForExposedEvent(eventType, query.otherQuery, targetEl, packedEvent));\n    function check(query, host, prop, propOnHost) {\n      return query[prop] == null || host[propOnHost || prop] === query[prop];\n    }\n  };\n  ECEventProcessor.prototype.afterTrigger = function () {\n    // Make sure the eventInfo won't be used in next trigger.\n    this.eventInfo = null;\n  };\n  return ECEventProcessor;\n}();\nexport { ECEventProcessor };\n;","map":{"version":3,"names":["zrUtil","parseClassType","ECEventProcessor","prototype","normalizeQuery","query","cptQuery","dataQuery","otherQuery","isString","condCptType","mainType","main","subType","sub","suffixes_1","dataKeys_1","name","dataIndex","dataType","each","val","key","reserved","i","length","propSuffix","suffixPos","lastIndexOf","slice","toLowerCase","hasOwnProperty","filter","eventType","eventInfo","targetEl","packedEvent","model","view","check","filterForExposedEvent","host","prop","propOnHost","afterTrigger"],"sources":["D:/code/bugzilla/527/front-end/node_modules/echarts/lib/util/ECEventProcessor.js"],"sourcesContent":["\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\n\r\n\r\n/**\r\n * AUTO-GENERATED FILE. DO NOT MODIFY.\r\n */\r\n\r\n/*\r\n* Licensed to the Apache Software Foundation (ASF) under one\r\n* or more contributor license agreements.  See the NOTICE file\r\n* distributed with this work for additional information\r\n* regarding copyright ownership.  The ASF licenses this file\r\n* to you under the Apache License, Version 2.0 (the\r\n* \"License\"); you may not use this file except in compliance\r\n* with the License.  You may obtain a copy of the License at\r\n*\r\n*   http://www.apache.org/licenses/LICENSE-2.0\r\n*\r\n* Unless required by applicable law or agreed to in writing,\r\n* software distributed under the License is distributed on an\r\n* \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\n* KIND, either express or implied.  See the License for the\r\n* specific language governing permissions and limitations\r\n* under the License.\r\n*/\r\nimport * as zrUtil from 'zrender/lib/core/util.js';\r\nimport { parseClassType } from './clazz.js';\r\n/**\r\n * Usage of query:\r\n * `chart.on('click', query, handler);`\r\n * The `query` can be:\r\n * + The component type query string, only `mainType` or `mainType.subType`,\r\n *   like: 'xAxis', 'series', 'xAxis.category' or 'series.line'.\r\n * + The component query object, like:\r\n *   `{seriesIndex: 2}`, `{seriesName: 'xx'}`, `{seriesId: 'some'}`,\r\n *   `{xAxisIndex: 2}`, `{xAxisName: 'xx'}`, `{xAxisId: 'some'}`.\r\n * + The data query object, like:\r\n *   `{dataIndex: 123}`, `{dataType: 'link'}`, `{name: 'some'}`.\r\n * + The other query object (cmponent customized query), like:\r\n *   `{element: 'some'}` (only available in custom series).\r\n *\r\n * Caveat: If a prop in the `query` object is `null/undefined`, it is the\r\n * same as there is no such prop in the `query` object.\r\n */\r\nvar ECEventProcessor = /** @class */function () {\r\n  function ECEventProcessor() {}\r\n  ECEventProcessor.prototype.normalizeQuery = function (query) {\r\n    var cptQuery = {};\r\n    var dataQuery = {};\r\n    var otherQuery = {};\r\n    // `query` is `mainType` or `mainType.subType` of component.\r\n    if (zrUtil.isString(query)) {\r\n      var condCptType = parseClassType(query);\r\n      // `.main` and `.sub` may be ''.\r\n      cptQuery.mainType = condCptType.main || null;\r\n      cptQuery.subType = condCptType.sub || null;\r\n    }\r\n    // `query` is an object, convert to {mainType, index, name, id}.\r\n    else {\r\n      // `xxxIndex`, `xxxName`, `xxxId`, `name`, `dataIndex`, `dataType` is reserved,\r\n      // can not be used in `compomentModel.filterForExposedEvent`.\r\n      var suffixes_1 = ['Index', 'Name', 'Id'];\r\n      var dataKeys_1 = {\r\n        name: 1,\r\n        dataIndex: 1,\r\n        dataType: 1\r\n      };\r\n      zrUtil.each(query, function (val, key) {\r\n        var reserved = false;\r\n        for (var i = 0; i < suffixes_1.length; i++) {\r\n          var propSuffix = suffixes_1[i];\r\n          var suffixPos = key.lastIndexOf(propSuffix);\r\n          if (suffixPos > 0 && suffixPos === key.length - propSuffix.length) {\r\n            var mainType = key.slice(0, suffixPos);\r\n            // Consider `dataIndex`.\r\n            if (mainType !== 'data') {\r\n              cptQuery.mainType = mainType;\r\n              cptQuery[propSuffix.toLowerCase()] = val;\r\n              reserved = true;\r\n            }\r\n          }\r\n        }\r\n        if (dataKeys_1.hasOwnProperty(key)) {\r\n          dataQuery[key] = val;\r\n          reserved = true;\r\n        }\r\n        if (!reserved) {\r\n          otherQuery[key] = val;\r\n        }\r\n      });\r\n    }\r\n    return {\r\n      cptQuery: cptQuery,\r\n      dataQuery: dataQuery,\r\n      otherQuery: otherQuery\r\n    };\r\n  };\r\n  ECEventProcessor.prototype.filter = function (eventType, query) {\r\n    // They should be assigned before each trigger call.\r\n    var eventInfo = this.eventInfo;\r\n    if (!eventInfo) {\r\n      return true;\r\n    }\r\n    var targetEl = eventInfo.targetEl;\r\n    var packedEvent = eventInfo.packedEvent;\r\n    var model = eventInfo.model;\r\n    var view = eventInfo.view;\r\n    // For event like 'globalout'.\r\n    if (!model || !view) {\r\n      return true;\r\n    }\r\n    var cptQuery = query.cptQuery;\r\n    var dataQuery = query.dataQuery;\r\n    return check(cptQuery, model, 'mainType') && check(cptQuery, model, 'subType') && check(cptQuery, model, 'index', 'componentIndex') && check(cptQuery, model, 'name') && check(cptQuery, model, 'id') && check(dataQuery, packedEvent, 'name') && check(dataQuery, packedEvent, 'dataIndex') && check(dataQuery, packedEvent, 'dataType') && (!view.filterForExposedEvent || view.filterForExposedEvent(eventType, query.otherQuery, targetEl, packedEvent));\r\n    function check(query, host, prop, propOnHost) {\r\n      return query[prop] == null || host[propOnHost || prop] === query[prop];\r\n    }\r\n  };\r\n  ECEventProcessor.prototype.afterTrigger = function () {\r\n    // Make sure the eventInfo won't be used in next trigger.\r\n    this.eventInfo = null;\r\n  };\r\n  return ECEventProcessor;\r\n}();\r\nexport { ECEventProcessor };\r\n;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}