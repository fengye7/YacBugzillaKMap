{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { adjustTextY, getIdURL, getMatrixStr, getPathPrecision, getShadowKey, getSRTTransformString, hasShadow, isAroundZero, isGradient, isImagePattern, isLinearGradient, isPattern, isRadialGradient, normalizeColor, round4, TEXT_ALIGN_TO_ANCHOR } from './helper.js';\nimport Path from '../graphic/Path.js';\nimport ZRImage from '../graphic/Image.js';\nimport { getLineHeight } from '../contain/text.js';\nimport TSpan from '../graphic/TSpan.js';\nimport SVGPathRebuilder from './SVGPathRebuilder.js';\nimport mapStyleToAttrs from './mapStyleToAttrs.js';\nimport { createVNode, vNodeToString, META_DATA_PREFIX } from './core.js';\nimport { assert, clone, isFunction, isString, logError, map, retrieve2 } from '../core/util.js';\nimport { createOrUpdateImage } from '../graphic/helper/image.js';\nimport { createCSSAnimation } from './cssAnimation.js';\nimport { hasSeparateFont, parseFontSize } from '../graphic/Text.js';\nimport { DEFAULT_FONT, DEFAULT_FONT_FAMILY } from '../core/platform.js';\nimport { createCSSEmphasis } from './cssEmphasis.js';\nimport { getElementSSRData } from '../zrender.js';\nvar round = Math.round;\nfunction isImageLike(val) {\n  return val && isString(val.src);\n}\nfunction isCanvasLike(val) {\n  return val && isFunction(val.toDataURL);\n}\nfunction setStyleAttrs(attrs, style, el, scope) {\n  mapStyleToAttrs(function (key, val) {\n    var isFillStroke = key === 'fill' || key === 'stroke';\n    if (isFillStroke && isGradient(val)) {\n      setGradient(style, attrs, key, scope);\n    } else if (isFillStroke && isPattern(val)) {\n      setPattern(el, attrs, key, scope);\n    } else if (isFillStroke && val === 'none') {\n      attrs[key] = 'transparent';\n    } else {\n      attrs[key] = val;\n    }\n  }, style, el, false);\n  setShadow(el, attrs, scope);\n}\nfunction setMetaData(attrs, el) {\n  var metaData = getElementSSRData(el);\n  if (metaData) {\n    metaData.each(function (val, key) {\n      val != null && (attrs[(META_DATA_PREFIX + key).toLowerCase()] = val + '');\n    });\n    if (el.isSilent()) {\n      attrs[META_DATA_PREFIX + 'silent'] = 'true';\n    }\n  }\n}\nfunction noRotateScale(m) {\n  return isAroundZero(m[0] - 1) && isAroundZero(m[1]) && isAroundZero(m[2]) && isAroundZero(m[3] - 1);\n}\nfunction noTranslate(m) {\n  return isAroundZero(m[4]) && isAroundZero(m[5]);\n}\nfunction setTransform(attrs, m, compress) {\n  if (m && !(noTranslate(m) && noRotateScale(m))) {\n    var mul = compress ? 10 : 1e4;\n    attrs.transform = noRotateScale(m) ? \"translate(\" + round(m[4] * mul) / mul + \" \" + round(m[5] * mul) / mul + \")\" : getMatrixStr(m);\n  }\n}\nfunction convertPolyShape(shape, attrs, mul) {\n  var points = shape.points;\n  var strArr = [];\n  for (var i = 0; i < points.length; i++) {\n    strArr.push(round(points[i][0] * mul) / mul);\n    strArr.push(round(points[i][1] * mul) / mul);\n  }\n  attrs.points = strArr.join(' ');\n}\nfunction validatePolyShape(shape) {\n  return !shape.smooth;\n}\nfunction createAttrsConvert(desc) {\n  var normalizedDesc = map(desc, function (item) {\n    return typeof item === 'string' ? [item, item] : item;\n  });\n  return function (shape, attrs, mul) {\n    for (var i = 0; i < normalizedDesc.length; i++) {\n      var item = normalizedDesc[i];\n      var val = shape[item[0]];\n      if (val != null) {\n        attrs[item[1]] = round(val * mul) / mul;\n      }\n    }\n  };\n}\nvar builtinShapesDef = {\n  circle: [createAttrsConvert(['cx', 'cy', 'r'])],\n  polyline: [convertPolyShape, validatePolyShape],\n  polygon: [convertPolyShape, validatePolyShape]\n};\nfunction hasShapeAnimation(el) {\n  var animators = el.animators;\n  for (var i = 0; i < animators.length; i++) {\n    if (animators[i].targetName === 'shape') {\n      return true;\n    }\n  }\n  return false;\n}\nexport function brushSVGPath(el, scope) {\n  var style = el.style;\n  var shape = el.shape;\n  var builtinShpDef = builtinShapesDef[el.type];\n  var attrs = {};\n  var needsAnimate = scope.animation;\n  var svgElType = 'path';\n  var strokePercent = el.style.strokePercent;\n  var precision = scope.compress && getPathPrecision(el) || 4;\n  if (builtinShpDef && !scope.willUpdate && !(builtinShpDef[1] && !builtinShpDef[1](shape)) && !(needsAnimate && hasShapeAnimation(el)) && !(strokePercent < 1)) {\n    svgElType = el.type;\n    var mul = Math.pow(10, precision);\n    builtinShpDef[0](shape, attrs, mul);\n  } else {\n    var needBuildPath = !el.path || el.shapeChanged();\n    if (!el.path) {\n      el.createPathProxy();\n    }\n    var path = el.path;\n    if (needBuildPath) {\n      path.beginPath();\n      el.buildPath(path, el.shape);\n      el.pathUpdated();\n    }\n    var pathVersion = path.getVersion();\n    var elExt = el;\n    var svgPathBuilder = elExt.__svgPathBuilder;\n    if (elExt.__svgPathVersion !== pathVersion || !svgPathBuilder || strokePercent !== elExt.__svgPathStrokePercent) {\n      if (!svgPathBuilder) {\n        svgPathBuilder = elExt.__svgPathBuilder = new SVGPathRebuilder();\n      }\n      svgPathBuilder.reset(precision);\n      path.rebuildPath(svgPathBuilder, strokePercent);\n      svgPathBuilder.generateStr();\n      elExt.__svgPathVersion = pathVersion;\n      elExt.__svgPathStrokePercent = strokePercent;\n    }\n    attrs.d = svgPathBuilder.getStr();\n  }\n  setTransform(attrs, el.transform);\n  setStyleAttrs(attrs, style, el, scope);\n  setMetaData(attrs, el);\n  scope.animation && createCSSAnimation(el, attrs, scope);\n  scope.emphasis && createCSSEmphasis(el, attrs, scope);\n  return createVNode(svgElType, el.id + '', attrs);\n}\nexport function brushSVGImage(el, scope) {\n  var style = el.style;\n  var image = style.image;\n  if (image && !isString(image)) {\n    if (isImageLike(image)) {\n      image = image.src;\n    } else if (isCanvasLike(image)) {\n      image = image.toDataURL();\n    }\n  }\n  if (!image) {\n    return;\n  }\n  var x = style.x || 0;\n  var y = style.y || 0;\n  var dw = style.width;\n  var dh = style.height;\n  var attrs = {\n    href: image,\n    width: dw,\n    height: dh\n  };\n  if (x) {\n    attrs.x = x;\n  }\n  if (y) {\n    attrs.y = y;\n  }\n  setTransform(attrs, el.transform);\n  setStyleAttrs(attrs, style, el, scope);\n  setMetaData(attrs, el);\n  scope.animation && createCSSAnimation(el, attrs, scope);\n  return createVNode('image', el.id + '', attrs);\n}\n;\nexport function brushSVGTSpan(el, scope) {\n  var style = el.style;\n  var text = style.text;\n  text != null && (text += '');\n  if (!text || isNaN(style.x) || isNaN(style.y)) {\n    return;\n  }\n  var font = style.font || DEFAULT_FONT;\n  var x = style.x || 0;\n  var y = adjustTextY(style.y || 0, getLineHeight(font), style.textBaseline);\n  var textAlign = TEXT_ALIGN_TO_ANCHOR[style.textAlign] || style.textAlign;\n  var attrs = {\n    'dominant-baseline': 'central',\n    'text-anchor': textAlign\n  };\n  if (hasSeparateFont(style)) {\n    var separatedFontStr = '';\n    var fontStyle = style.fontStyle;\n    var fontSize = parseFontSize(style.fontSize);\n    if (!parseFloat(fontSize)) {\n      return;\n    }\n    var fontFamily = style.fontFamily || DEFAULT_FONT_FAMILY;\n    var fontWeight = style.fontWeight;\n    separatedFontStr += \"font-size:\" + fontSize + \";font-family:\" + fontFamily + \";\";\n    if (fontStyle && fontStyle !== 'normal') {\n      separatedFontStr += \"font-style:\" + fontStyle + \";\";\n    }\n    if (fontWeight && fontWeight !== 'normal') {\n      separatedFontStr += \"font-weight:\" + fontWeight + \";\";\n    }\n    attrs.style = separatedFontStr;\n  } else {\n    attrs.style = \"font: \" + font;\n  }\n  if (text.match(/\\s/)) {\n    attrs['xml:space'] = 'preserve';\n  }\n  if (x) {\n    attrs.x = x;\n  }\n  if (y) {\n    attrs.y = y;\n  }\n  setTransform(attrs, el.transform);\n  setStyleAttrs(attrs, style, el, scope);\n  setMetaData(attrs, el);\n  scope.animation && createCSSAnimation(el, attrs, scope);\n  return createVNode('text', el.id + '', attrs, undefined, text);\n}\nexport function brush(el, scope) {\n  if (el instanceof Path) {\n    return brushSVGPath(el, scope);\n  } else if (el instanceof ZRImage) {\n    return brushSVGImage(el, scope);\n  } else if (el instanceof TSpan) {\n    return brushSVGTSpan(el, scope);\n  }\n}\nfunction setShadow(el, attrs, scope) {\n  var style = el.style;\n  if (hasShadow(style)) {\n    var shadowKey = getShadowKey(el);\n    var shadowCache = scope.shadowCache;\n    var shadowId = shadowCache[shadowKey];\n    if (!shadowId) {\n      var globalScale = el.getGlobalScale();\n      var scaleX = globalScale[0];\n      var scaleY = globalScale[1];\n      if (!scaleX || !scaleY) {\n        return;\n      }\n      var offsetX = style.shadowOffsetX || 0;\n      var offsetY = style.shadowOffsetY || 0;\n      var blur_1 = style.shadowBlur;\n      var _a = normalizeColor(style.shadowColor),\n        opacity = _a.opacity,\n        color = _a.color;\n      var stdDx = blur_1 / 2 / scaleX;\n      var stdDy = blur_1 / 2 / scaleY;\n      var stdDeviation = stdDx + ' ' + stdDy;\n      shadowId = scope.zrId + '-s' + scope.shadowIdx++;\n      scope.defs[shadowId] = createVNode('filter', shadowId, {\n        'id': shadowId,\n        'x': '-100%',\n        'y': '-100%',\n        'width': '300%',\n        'height': '300%'\n      }, [createVNode('feDropShadow', '', {\n        'dx': offsetX / scaleX,\n        'dy': offsetY / scaleY,\n        'stdDeviation': stdDeviation,\n        'flood-color': color,\n        'flood-opacity': opacity\n      })]);\n      shadowCache[shadowKey] = shadowId;\n    }\n    attrs.filter = getIdURL(shadowId);\n  }\n}\nexport function setGradient(style, attrs, target, scope) {\n  var val = style[target];\n  var gradientTag;\n  var gradientAttrs = {\n    'gradientUnits': val.global ? 'userSpaceOnUse' : 'objectBoundingBox'\n  };\n  if (isLinearGradient(val)) {\n    gradientTag = 'linearGradient';\n    gradientAttrs.x1 = val.x;\n    gradientAttrs.y1 = val.y;\n    gradientAttrs.x2 = val.x2;\n    gradientAttrs.y2 = val.y2;\n  } else if (isRadialGradient(val)) {\n    gradientTag = 'radialGradient';\n    gradientAttrs.cx = retrieve2(val.x, 0.5);\n    gradientAttrs.cy = retrieve2(val.y, 0.5);\n    gradientAttrs.r = retrieve2(val.r, 0.5);\n  } else {\n    if (process.env.NODE_ENV !== 'production') {\n      logError('Illegal gradient type.');\n    }\n    return;\n  }\n  var colors = val.colorStops;\n  var colorStops = [];\n  for (var i = 0, len = colors.length; i < len; ++i) {\n    var offset = round4(colors[i].offset) * 100 + '%';\n    var stopColor = colors[i].color;\n    var _a = normalizeColor(stopColor),\n      color = _a.color,\n      opacity = _a.opacity;\n    var stopsAttrs = {\n      'offset': offset\n    };\n    stopsAttrs['stop-color'] = color;\n    if (opacity < 1) {\n      stopsAttrs['stop-opacity'] = opacity;\n    }\n    colorStops.push(createVNode('stop', i + '', stopsAttrs));\n  }\n  var gradientVNode = createVNode(gradientTag, '', gradientAttrs, colorStops);\n  var gradientKey = vNodeToString(gradientVNode);\n  var gradientCache = scope.gradientCache;\n  var gradientId = gradientCache[gradientKey];\n  if (!gradientId) {\n    gradientId = scope.zrId + '-g' + scope.gradientIdx++;\n    gradientCache[gradientKey] = gradientId;\n    gradientAttrs.id = gradientId;\n    scope.defs[gradientId] = createVNode(gradientTag, gradientId, gradientAttrs, colorStops);\n  }\n  attrs[target] = getIdURL(gradientId);\n}\nexport function setPattern(el, attrs, target, scope) {\n  var val = el.style[target];\n  var boundingRect = el.getBoundingRect();\n  var patternAttrs = {};\n  var repeat = val.repeat;\n  var noRepeat = repeat === 'no-repeat';\n  var repeatX = repeat === 'repeat-x';\n  var repeatY = repeat === 'repeat-y';\n  var child;\n  if (isImagePattern(val)) {\n    var imageWidth_1 = val.imageWidth;\n    var imageHeight_1 = val.imageHeight;\n    var imageSrc = void 0;\n    var patternImage = val.image;\n    if (isString(patternImage)) {\n      imageSrc = patternImage;\n    } else if (isImageLike(patternImage)) {\n      imageSrc = patternImage.src;\n    } else if (isCanvasLike(patternImage)) {\n      imageSrc = patternImage.toDataURL();\n    }\n    if (typeof Image === 'undefined') {\n      var errMsg = 'Image width/height must been given explictly in svg-ssr renderer.';\n      assert(imageWidth_1, errMsg);\n      assert(imageHeight_1, errMsg);\n    } else if (imageWidth_1 == null || imageHeight_1 == null) {\n      var setSizeToVNode_1 = function (vNode, img) {\n        if (vNode) {\n          var svgEl = vNode.elm;\n          var width = imageWidth_1 || img.width;\n          var height = imageHeight_1 || img.height;\n          if (vNode.tag === 'pattern') {\n            if (repeatX) {\n              height = 1;\n              width /= boundingRect.width;\n            } else if (repeatY) {\n              width = 1;\n              height /= boundingRect.height;\n            }\n          }\n          vNode.attrs.width = width;\n          vNode.attrs.height = height;\n          if (svgEl) {\n            svgEl.setAttribute('width', width);\n            svgEl.setAttribute('height', height);\n          }\n        }\n      };\n      var createdImage = createOrUpdateImage(imageSrc, null, el, function (img) {\n        noRepeat || setSizeToVNode_1(patternVNode, img);\n        setSizeToVNode_1(child, img);\n      });\n      if (createdImage && createdImage.width && createdImage.height) {\n        imageWidth_1 = imageWidth_1 || createdImage.width;\n        imageHeight_1 = imageHeight_1 || createdImage.height;\n      }\n    }\n    child = createVNode('image', 'img', {\n      href: imageSrc,\n      width: imageWidth_1,\n      height: imageHeight_1\n    });\n    patternAttrs.width = imageWidth_1;\n    patternAttrs.height = imageHeight_1;\n  } else if (val.svgElement) {\n    child = clone(val.svgElement);\n    patternAttrs.width = val.svgWidth;\n    patternAttrs.height = val.svgHeight;\n  }\n  if (!child) {\n    return;\n  }\n  var patternWidth;\n  var patternHeight;\n  if (noRepeat) {\n    patternWidth = patternHeight = 1;\n  } else if (repeatX) {\n    patternHeight = 1;\n    patternWidth = patternAttrs.width / boundingRect.width;\n  } else if (repeatY) {\n    patternWidth = 1;\n    patternHeight = patternAttrs.height / boundingRect.height;\n  } else {\n    patternAttrs.patternUnits = 'userSpaceOnUse';\n  }\n  if (patternWidth != null && !isNaN(patternWidth)) {\n    patternAttrs.width = patternWidth;\n  }\n  if (patternHeight != null && !isNaN(patternHeight)) {\n    patternAttrs.height = patternHeight;\n  }\n  var patternTransform = getSRTTransformString(val);\n  patternTransform && (patternAttrs.patternTransform = patternTransform);\n  var patternVNode = createVNode('pattern', '', patternAttrs, [child]);\n  var patternKey = vNodeToString(patternVNode);\n  var patternCache = scope.patternCache;\n  var patternId = patternCache[patternKey];\n  if (!patternId) {\n    patternId = scope.zrId + '-p' + scope.patternIdx++;\n    patternCache[patternKey] = patternId;\n    patternAttrs.id = patternId;\n    patternVNode = scope.defs[patternId] = createVNode('pattern', patternId, patternAttrs, [child]);\n  }\n  attrs[target] = getIdURL(patternId);\n}\nexport function setClipPath(clipPath, attrs, scope) {\n  var clipPathCache = scope.clipPathCache,\n    defs = scope.defs;\n  var clipPathId = clipPathCache[clipPath.id];\n  if (!clipPathId) {\n    clipPathId = scope.zrId + '-c' + scope.clipPathIdx++;\n    var clipPathAttrs = {\n      id: clipPathId\n    };\n    clipPathCache[clipPath.id] = clipPathId;\n    defs[clipPathId] = createVNode('clipPath', clipPathId, clipPathAttrs, [brushSVGPath(clipPath, scope)]);\n  }\n  attrs['clip-path'] = getIdURL(clipPathId);\n}","map":{"version":3,"names":["adjustTextY","getIdURL","getMatrixStr","getPathPrecision","getShadowKey","getSRTTransformString","hasShadow","isAroundZero","isGradient","isImagePattern","isLinearGradient","isPattern","isRadialGradient","normalizeColor","round4","TEXT_ALIGN_TO_ANCHOR","Path","ZRImage","getLineHeight","TSpan","SVGPathRebuilder","mapStyleToAttrs","createVNode","vNodeToString","META_DATA_PREFIX","assert","clone","isFunction","isString","logError","map","retrieve2","createOrUpdateImage","createCSSAnimation","hasSeparateFont","parseFontSize","DEFAULT_FONT","DEFAULT_FONT_FAMILY","createCSSEmphasis","getElementSSRData","round","Math","isImageLike","val","src","isCanvasLike","toDataURL","setStyleAttrs","attrs","style","el","scope","key","isFillStroke","setGradient","setPattern","setShadow","setMetaData","metaData","each","toLowerCase","isSilent","noRotateScale","m","noTranslate","setTransform","compress","mul","transform","convertPolyShape","shape","points","strArr","i","length","push","join","validatePolyShape","smooth","createAttrsConvert","desc","normalizedDesc","item","builtinShapesDef","circle","polyline","polygon","hasShapeAnimation","animators","targetName","brushSVGPath","builtinShpDef","type","needsAnimate","animation","svgElType","strokePercent","precision","willUpdate","pow","needBuildPath","path","shapeChanged","createPathProxy","beginPath","buildPath","pathUpdated","pathVersion","getVersion","elExt","svgPathBuilder","__svgPathBuilder","__svgPathVersion","__svgPathStrokePercent","reset","rebuildPath","generateStr","d","getStr","emphasis","id","brushSVGImage","image","x","y","dw","width","dh","height","href","brushSVGTSpan","text","isNaN","font","textBaseline","textAlign","separatedFontStr","fontStyle","fontSize","parseFloat","fontFamily","fontWeight","match","undefined","brush","shadowKey","shadowCache","shadowId","globalScale","getGlobalScale","scaleX","scaleY","offsetX","shadowOffsetX","offsetY","shadowOffsetY","blur_1","shadowBlur","_a","shadowColor","opacity","color","stdDx","stdDy","stdDeviation","zrId","shadowIdx","defs","filter","target","gradientTag","gradientAttrs","global","x1","y1","x2","y2","cx","cy","r","process","env","NODE_ENV","colors","colorStops","len","offset","stopColor","stopsAttrs","gradientVNode","gradientKey","gradientCache","gradientId","gradientIdx","boundingRect","getBoundingRect","patternAttrs","repeat","noRepeat","repeatX","repeatY","child","imageWidth_1","imageWidth","imageHeight_1","imageHeight","imageSrc","patternImage","Image","errMsg","setSizeToVNode_1","vNode","img","svgEl","elm","tag","setAttribute","createdImage","patternVNode","svgElement","svgWidth","svgHeight","patternWidth","patternHeight","patternUnits","patternTransform","patternKey","patternCache","patternId","patternIdx","setClipPath","clipPath","clipPathCache","clipPathId","clipPathIdx","clipPathAttrs"],"sources":["D:/code/bugzilla/527/front-end/node_modules/zrender/lib/svg/graphic.js"],"sourcesContent":["import { adjustTextY, getIdURL, getMatrixStr, getPathPrecision, getShadowKey, getSRTTransformString, hasShadow, isAroundZero, isGradient, isImagePattern, isLinearGradient, isPattern, isRadialGradient, normalizeColor, round4, TEXT_ALIGN_TO_ANCHOR } from './helper.js';\r\nimport Path from '../graphic/Path.js';\r\nimport ZRImage from '../graphic/Image.js';\r\nimport { getLineHeight } from '../contain/text.js';\r\nimport TSpan from '../graphic/TSpan.js';\r\nimport SVGPathRebuilder from './SVGPathRebuilder.js';\r\nimport mapStyleToAttrs from './mapStyleToAttrs.js';\r\nimport { createVNode, vNodeToString, META_DATA_PREFIX } from './core.js';\r\nimport { assert, clone, isFunction, isString, logError, map, retrieve2 } from '../core/util.js';\r\nimport { createOrUpdateImage } from '../graphic/helper/image.js';\r\nimport { createCSSAnimation } from './cssAnimation.js';\r\nimport { hasSeparateFont, parseFontSize } from '../graphic/Text.js';\r\nimport { DEFAULT_FONT, DEFAULT_FONT_FAMILY } from '../core/platform.js';\r\nimport { createCSSEmphasis } from './cssEmphasis.js';\r\nimport { getElementSSRData } from '../zrender.js';\r\nvar round = Math.round;\r\nfunction isImageLike(val) {\r\n    return val && isString(val.src);\r\n}\r\nfunction isCanvasLike(val) {\r\n    return val && isFunction(val.toDataURL);\r\n}\r\nfunction setStyleAttrs(attrs, style, el, scope) {\r\n    mapStyleToAttrs(function (key, val) {\r\n        var isFillStroke = key === 'fill' || key === 'stroke';\r\n        if (isFillStroke && isGradient(val)) {\r\n            setGradient(style, attrs, key, scope);\r\n        }\r\n        else if (isFillStroke && isPattern(val)) {\r\n            setPattern(el, attrs, key, scope);\r\n        }\r\n        else if (isFillStroke && val === 'none') {\r\n            attrs[key] = 'transparent';\r\n        }\r\n        else {\r\n            attrs[key] = val;\r\n        }\r\n    }, style, el, false);\r\n    setShadow(el, attrs, scope);\r\n}\r\nfunction setMetaData(attrs, el) {\r\n    var metaData = getElementSSRData(el);\r\n    if (metaData) {\r\n        metaData.each(function (val, key) {\r\n            val != null && (attrs[(META_DATA_PREFIX + key).toLowerCase()] = val + '');\r\n        });\r\n        if (el.isSilent()) {\r\n            attrs[META_DATA_PREFIX + 'silent'] = 'true';\r\n        }\r\n    }\r\n}\r\nfunction noRotateScale(m) {\r\n    return isAroundZero(m[0] - 1)\r\n        && isAroundZero(m[1])\r\n        && isAroundZero(m[2])\r\n        && isAroundZero(m[3] - 1);\r\n}\r\nfunction noTranslate(m) {\r\n    return isAroundZero(m[4]) && isAroundZero(m[5]);\r\n}\r\nfunction setTransform(attrs, m, compress) {\r\n    if (m && !(noTranslate(m) && noRotateScale(m))) {\r\n        var mul = compress ? 10 : 1e4;\r\n        attrs.transform = noRotateScale(m)\r\n            ? \"translate(\" + round(m[4] * mul) / mul + \" \" + round(m[5] * mul) / mul + \")\" : getMatrixStr(m);\r\n    }\r\n}\r\nfunction convertPolyShape(shape, attrs, mul) {\r\n    var points = shape.points;\r\n    var strArr = [];\r\n    for (var i = 0; i < points.length; i++) {\r\n        strArr.push(round(points[i][0] * mul) / mul);\r\n        strArr.push(round(points[i][1] * mul) / mul);\r\n    }\r\n    attrs.points = strArr.join(' ');\r\n}\r\nfunction validatePolyShape(shape) {\r\n    return !shape.smooth;\r\n}\r\nfunction createAttrsConvert(desc) {\r\n    var normalizedDesc = map(desc, function (item) {\r\n        return (typeof item === 'string' ? [item, item] : item);\r\n    });\r\n    return function (shape, attrs, mul) {\r\n        for (var i = 0; i < normalizedDesc.length; i++) {\r\n            var item = normalizedDesc[i];\r\n            var val = shape[item[0]];\r\n            if (val != null) {\r\n                attrs[item[1]] = round(val * mul) / mul;\r\n            }\r\n        }\r\n    };\r\n}\r\nvar builtinShapesDef = {\r\n    circle: [createAttrsConvert(['cx', 'cy', 'r'])],\r\n    polyline: [convertPolyShape, validatePolyShape],\r\n    polygon: [convertPolyShape, validatePolyShape]\r\n};\r\nfunction hasShapeAnimation(el) {\r\n    var animators = el.animators;\r\n    for (var i = 0; i < animators.length; i++) {\r\n        if (animators[i].targetName === 'shape') {\r\n            return true;\r\n        }\r\n    }\r\n    return false;\r\n}\r\nexport function brushSVGPath(el, scope) {\r\n    var style = el.style;\r\n    var shape = el.shape;\r\n    var builtinShpDef = builtinShapesDef[el.type];\r\n    var attrs = {};\r\n    var needsAnimate = scope.animation;\r\n    var svgElType = 'path';\r\n    var strokePercent = el.style.strokePercent;\r\n    var precision = (scope.compress && getPathPrecision(el)) || 4;\r\n    if (builtinShpDef\r\n        && !scope.willUpdate\r\n        && !(builtinShpDef[1] && !builtinShpDef[1](shape))\r\n        && !(needsAnimate && hasShapeAnimation(el))\r\n        && !(strokePercent < 1)) {\r\n        svgElType = el.type;\r\n        var mul = Math.pow(10, precision);\r\n        builtinShpDef[0](shape, attrs, mul);\r\n    }\r\n    else {\r\n        var needBuildPath = !el.path || el.shapeChanged();\r\n        if (!el.path) {\r\n            el.createPathProxy();\r\n        }\r\n        var path = el.path;\r\n        if (needBuildPath) {\r\n            path.beginPath();\r\n            el.buildPath(path, el.shape);\r\n            el.pathUpdated();\r\n        }\r\n        var pathVersion = path.getVersion();\r\n        var elExt = el;\r\n        var svgPathBuilder = elExt.__svgPathBuilder;\r\n        if (elExt.__svgPathVersion !== pathVersion\r\n            || !svgPathBuilder\r\n            || strokePercent !== elExt.__svgPathStrokePercent) {\r\n            if (!svgPathBuilder) {\r\n                svgPathBuilder = elExt.__svgPathBuilder = new SVGPathRebuilder();\r\n            }\r\n            svgPathBuilder.reset(precision);\r\n            path.rebuildPath(svgPathBuilder, strokePercent);\r\n            svgPathBuilder.generateStr();\r\n            elExt.__svgPathVersion = pathVersion;\r\n            elExt.__svgPathStrokePercent = strokePercent;\r\n        }\r\n        attrs.d = svgPathBuilder.getStr();\r\n    }\r\n    setTransform(attrs, el.transform);\r\n    setStyleAttrs(attrs, style, el, scope);\r\n    setMetaData(attrs, el);\r\n    scope.animation && createCSSAnimation(el, attrs, scope);\r\n    scope.emphasis && createCSSEmphasis(el, attrs, scope);\r\n    return createVNode(svgElType, el.id + '', attrs);\r\n}\r\nexport function brushSVGImage(el, scope) {\r\n    var style = el.style;\r\n    var image = style.image;\r\n    if (image && !isString(image)) {\r\n        if (isImageLike(image)) {\r\n            image = image.src;\r\n        }\r\n        else if (isCanvasLike(image)) {\r\n            image = image.toDataURL();\r\n        }\r\n    }\r\n    if (!image) {\r\n        return;\r\n    }\r\n    var x = style.x || 0;\r\n    var y = style.y || 0;\r\n    var dw = style.width;\r\n    var dh = style.height;\r\n    var attrs = {\r\n        href: image,\r\n        width: dw,\r\n        height: dh\r\n    };\r\n    if (x) {\r\n        attrs.x = x;\r\n    }\r\n    if (y) {\r\n        attrs.y = y;\r\n    }\r\n    setTransform(attrs, el.transform);\r\n    setStyleAttrs(attrs, style, el, scope);\r\n    setMetaData(attrs, el);\r\n    scope.animation && createCSSAnimation(el, attrs, scope);\r\n    return createVNode('image', el.id + '', attrs);\r\n}\r\n;\r\nexport function brushSVGTSpan(el, scope) {\r\n    var style = el.style;\r\n    var text = style.text;\r\n    text != null && (text += '');\r\n    if (!text || isNaN(style.x) || isNaN(style.y)) {\r\n        return;\r\n    }\r\n    var font = style.font || DEFAULT_FONT;\r\n    var x = style.x || 0;\r\n    var y = adjustTextY(style.y || 0, getLineHeight(font), style.textBaseline);\r\n    var textAlign = TEXT_ALIGN_TO_ANCHOR[style.textAlign]\r\n        || style.textAlign;\r\n    var attrs = {\r\n        'dominant-baseline': 'central',\r\n        'text-anchor': textAlign\r\n    };\r\n    if (hasSeparateFont(style)) {\r\n        var separatedFontStr = '';\r\n        var fontStyle = style.fontStyle;\r\n        var fontSize = parseFontSize(style.fontSize);\r\n        if (!parseFloat(fontSize)) {\r\n            return;\r\n        }\r\n        var fontFamily = style.fontFamily || DEFAULT_FONT_FAMILY;\r\n        var fontWeight = style.fontWeight;\r\n        separatedFontStr += \"font-size:\" + fontSize + \";font-family:\" + fontFamily + \";\";\r\n        if (fontStyle && fontStyle !== 'normal') {\r\n            separatedFontStr += \"font-style:\" + fontStyle + \";\";\r\n        }\r\n        if (fontWeight && fontWeight !== 'normal') {\r\n            separatedFontStr += \"font-weight:\" + fontWeight + \";\";\r\n        }\r\n        attrs.style = separatedFontStr;\r\n    }\r\n    else {\r\n        attrs.style = \"font: \" + font;\r\n    }\r\n    if (text.match(/\\s/)) {\r\n        attrs['xml:space'] = 'preserve';\r\n    }\r\n    if (x) {\r\n        attrs.x = x;\r\n    }\r\n    if (y) {\r\n        attrs.y = y;\r\n    }\r\n    setTransform(attrs, el.transform);\r\n    setStyleAttrs(attrs, style, el, scope);\r\n    setMetaData(attrs, el);\r\n    scope.animation && createCSSAnimation(el, attrs, scope);\r\n    return createVNode('text', el.id + '', attrs, undefined, text);\r\n}\r\nexport function brush(el, scope) {\r\n    if (el instanceof Path) {\r\n        return brushSVGPath(el, scope);\r\n    }\r\n    else if (el instanceof ZRImage) {\r\n        return brushSVGImage(el, scope);\r\n    }\r\n    else if (el instanceof TSpan) {\r\n        return brushSVGTSpan(el, scope);\r\n    }\r\n}\r\nfunction setShadow(el, attrs, scope) {\r\n    var style = el.style;\r\n    if (hasShadow(style)) {\r\n        var shadowKey = getShadowKey(el);\r\n        var shadowCache = scope.shadowCache;\r\n        var shadowId = shadowCache[shadowKey];\r\n        if (!shadowId) {\r\n            var globalScale = el.getGlobalScale();\r\n            var scaleX = globalScale[0];\r\n            var scaleY = globalScale[1];\r\n            if (!scaleX || !scaleY) {\r\n                return;\r\n            }\r\n            var offsetX = style.shadowOffsetX || 0;\r\n            var offsetY = style.shadowOffsetY || 0;\r\n            var blur_1 = style.shadowBlur;\r\n            var _a = normalizeColor(style.shadowColor), opacity = _a.opacity, color = _a.color;\r\n            var stdDx = blur_1 / 2 / scaleX;\r\n            var stdDy = blur_1 / 2 / scaleY;\r\n            var stdDeviation = stdDx + ' ' + stdDy;\r\n            shadowId = scope.zrId + '-s' + scope.shadowIdx++;\r\n            scope.defs[shadowId] = createVNode('filter', shadowId, {\r\n                'id': shadowId,\r\n                'x': '-100%',\r\n                'y': '-100%',\r\n                'width': '300%',\r\n                'height': '300%'\r\n            }, [\r\n                createVNode('feDropShadow', '', {\r\n                    'dx': offsetX / scaleX,\r\n                    'dy': offsetY / scaleY,\r\n                    'stdDeviation': stdDeviation,\r\n                    'flood-color': color,\r\n                    'flood-opacity': opacity\r\n                })\r\n            ]);\r\n            shadowCache[shadowKey] = shadowId;\r\n        }\r\n        attrs.filter = getIdURL(shadowId);\r\n    }\r\n}\r\nexport function setGradient(style, attrs, target, scope) {\r\n    var val = style[target];\r\n    var gradientTag;\r\n    var gradientAttrs = {\r\n        'gradientUnits': val.global\r\n            ? 'userSpaceOnUse'\r\n            : 'objectBoundingBox'\r\n    };\r\n    if (isLinearGradient(val)) {\r\n        gradientTag = 'linearGradient';\r\n        gradientAttrs.x1 = val.x;\r\n        gradientAttrs.y1 = val.y;\r\n        gradientAttrs.x2 = val.x2;\r\n        gradientAttrs.y2 = val.y2;\r\n    }\r\n    else if (isRadialGradient(val)) {\r\n        gradientTag = 'radialGradient';\r\n        gradientAttrs.cx = retrieve2(val.x, 0.5);\r\n        gradientAttrs.cy = retrieve2(val.y, 0.5);\r\n        gradientAttrs.r = retrieve2(val.r, 0.5);\r\n    }\r\n    else {\r\n        if (process.env.NODE_ENV !== 'production') {\r\n            logError('Illegal gradient type.');\r\n        }\r\n        return;\r\n    }\r\n    var colors = val.colorStops;\r\n    var colorStops = [];\r\n    for (var i = 0, len = colors.length; i < len; ++i) {\r\n        var offset = round4(colors[i].offset) * 100 + '%';\r\n        var stopColor = colors[i].color;\r\n        var _a = normalizeColor(stopColor), color = _a.color, opacity = _a.opacity;\r\n        var stopsAttrs = {\r\n            'offset': offset\r\n        };\r\n        stopsAttrs['stop-color'] = color;\r\n        if (opacity < 1) {\r\n            stopsAttrs['stop-opacity'] = opacity;\r\n        }\r\n        colorStops.push(createVNode('stop', i + '', stopsAttrs));\r\n    }\r\n    var gradientVNode = createVNode(gradientTag, '', gradientAttrs, colorStops);\r\n    var gradientKey = vNodeToString(gradientVNode);\r\n    var gradientCache = scope.gradientCache;\r\n    var gradientId = gradientCache[gradientKey];\r\n    if (!gradientId) {\r\n        gradientId = scope.zrId + '-g' + scope.gradientIdx++;\r\n        gradientCache[gradientKey] = gradientId;\r\n        gradientAttrs.id = gradientId;\r\n        scope.defs[gradientId] = createVNode(gradientTag, gradientId, gradientAttrs, colorStops);\r\n    }\r\n    attrs[target] = getIdURL(gradientId);\r\n}\r\nexport function setPattern(el, attrs, target, scope) {\r\n    var val = el.style[target];\r\n    var boundingRect = el.getBoundingRect();\r\n    var patternAttrs = {};\r\n    var repeat = val.repeat;\r\n    var noRepeat = repeat === 'no-repeat';\r\n    var repeatX = repeat === 'repeat-x';\r\n    var repeatY = repeat === 'repeat-y';\r\n    var child;\r\n    if (isImagePattern(val)) {\r\n        var imageWidth_1 = val.imageWidth;\r\n        var imageHeight_1 = val.imageHeight;\r\n        var imageSrc = void 0;\r\n        var patternImage = val.image;\r\n        if (isString(patternImage)) {\r\n            imageSrc = patternImage;\r\n        }\r\n        else if (isImageLike(patternImage)) {\r\n            imageSrc = patternImage.src;\r\n        }\r\n        else if (isCanvasLike(patternImage)) {\r\n            imageSrc = patternImage.toDataURL();\r\n        }\r\n        if (typeof Image === 'undefined') {\r\n            var errMsg = 'Image width/height must been given explictly in svg-ssr renderer.';\r\n            assert(imageWidth_1, errMsg);\r\n            assert(imageHeight_1, errMsg);\r\n        }\r\n        else if (imageWidth_1 == null || imageHeight_1 == null) {\r\n            var setSizeToVNode_1 = function (vNode, img) {\r\n                if (vNode) {\r\n                    var svgEl = vNode.elm;\r\n                    var width = imageWidth_1 || img.width;\r\n                    var height = imageHeight_1 || img.height;\r\n                    if (vNode.tag === 'pattern') {\r\n                        if (repeatX) {\r\n                            height = 1;\r\n                            width /= boundingRect.width;\r\n                        }\r\n                        else if (repeatY) {\r\n                            width = 1;\r\n                            height /= boundingRect.height;\r\n                        }\r\n                    }\r\n                    vNode.attrs.width = width;\r\n                    vNode.attrs.height = height;\r\n                    if (svgEl) {\r\n                        svgEl.setAttribute('width', width);\r\n                        svgEl.setAttribute('height', height);\r\n                    }\r\n                }\r\n            };\r\n            var createdImage = createOrUpdateImage(imageSrc, null, el, function (img) {\r\n                noRepeat || setSizeToVNode_1(patternVNode, img);\r\n                setSizeToVNode_1(child, img);\r\n            });\r\n            if (createdImage && createdImage.width && createdImage.height) {\r\n                imageWidth_1 = imageWidth_1 || createdImage.width;\r\n                imageHeight_1 = imageHeight_1 || createdImage.height;\r\n            }\r\n        }\r\n        child = createVNode('image', 'img', {\r\n            href: imageSrc,\r\n            width: imageWidth_1,\r\n            height: imageHeight_1\r\n        });\r\n        patternAttrs.width = imageWidth_1;\r\n        patternAttrs.height = imageHeight_1;\r\n    }\r\n    else if (val.svgElement) {\r\n        child = clone(val.svgElement);\r\n        patternAttrs.width = val.svgWidth;\r\n        patternAttrs.height = val.svgHeight;\r\n    }\r\n    if (!child) {\r\n        return;\r\n    }\r\n    var patternWidth;\r\n    var patternHeight;\r\n    if (noRepeat) {\r\n        patternWidth = patternHeight = 1;\r\n    }\r\n    else if (repeatX) {\r\n        patternHeight = 1;\r\n        patternWidth = patternAttrs.width / boundingRect.width;\r\n    }\r\n    else if (repeatY) {\r\n        patternWidth = 1;\r\n        patternHeight = patternAttrs.height / boundingRect.height;\r\n    }\r\n    else {\r\n        patternAttrs.patternUnits = 'userSpaceOnUse';\r\n    }\r\n    if (patternWidth != null && !isNaN(patternWidth)) {\r\n        patternAttrs.width = patternWidth;\r\n    }\r\n    if (patternHeight != null && !isNaN(patternHeight)) {\r\n        patternAttrs.height = patternHeight;\r\n    }\r\n    var patternTransform = getSRTTransformString(val);\r\n    patternTransform && (patternAttrs.patternTransform = patternTransform);\r\n    var patternVNode = createVNode('pattern', '', patternAttrs, [child]);\r\n    var patternKey = vNodeToString(patternVNode);\r\n    var patternCache = scope.patternCache;\r\n    var patternId = patternCache[patternKey];\r\n    if (!patternId) {\r\n        patternId = scope.zrId + '-p' + scope.patternIdx++;\r\n        patternCache[patternKey] = patternId;\r\n        patternAttrs.id = patternId;\r\n        patternVNode = scope.defs[patternId] = createVNode('pattern', patternId, patternAttrs, [child]);\r\n    }\r\n    attrs[target] = getIdURL(patternId);\r\n}\r\nexport function setClipPath(clipPath, attrs, scope) {\r\n    var clipPathCache = scope.clipPathCache, defs = scope.defs;\r\n    var clipPathId = clipPathCache[clipPath.id];\r\n    if (!clipPathId) {\r\n        clipPathId = scope.zrId + '-c' + scope.clipPathIdx++;\r\n        var clipPathAttrs = {\r\n            id: clipPathId\r\n        };\r\n        clipPathCache[clipPath.id] = clipPathId;\r\n        defs[clipPathId] = createVNode('clipPath', clipPathId, clipPathAttrs, [brushSVGPath(clipPath, scope)]);\r\n    }\r\n    attrs['clip-path'] = getIdURL(clipPathId);\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}